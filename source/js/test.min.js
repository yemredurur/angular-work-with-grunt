var app=angular.module("addUserApp",["firebase","ngMessages"]),fireBaseUrl="https://shining-torch-9442.firebaseio.com";app.factory("userLists",["$firebaseArray",function(a){var b=new Firebase(fireBaseUrl+"/users"),c=b.orderByChild("name").limitToLast(10);return a(c)}]),app.factory("User",["$firebaseObject",function(a){return function(b){var c=new Firebase(fireBaseUrl+"/users"),d=c.child(b);return a(d)}}]),app.controller("addUserCtrl",["$scope","$firebaseObject","userLists","User","$timeout",function(a,b,c,d,e){a.usersList=c,a.showAdded=!1,a.submitForm=function(){a.usersList.$add({id:a.addUserForm.userId.$viewValue,name:a.addUserForm.userName.$viewValue,phone:a.addUserForm.userPhone.$viewValue,email:a.addUserForm.userEmail.$viewValue,username:a.addUserForm.userName.$viewValue,website:a.addUserForm.userWebSite.$viewValue,address:{city:a.addUserForm.city,street:a.addUserForm.street,suite:a.addUserForm.suite,zipcode:a.addUserForm.zipCode}}).then(function(b){a.showAdded=!0;var c=b.key();document.getElementById("addUserForm").reset(),console.log("added record with id "+c)}),e(function(){a.showAdded=!1},2e3)}}]);var app=angular.module("userListApp",["firebase"]),fireBaseUrl="https://shining-torch-9442.firebaseio.com";app.factory("userLists",["$firebaseArray",function(a){var b=new Firebase(fireBaseUrl+"/users");return a(b)}]),app.factory("User",["$firebaseObject",function(a){return function(b){var c=new Firebase(fireBaseUrl+"/users"),d=c.child(b);return a(d)}}]),app.controller("userListViewController",["$scope","$firebaseObject","userLists","User","$timeout",function(a,b,c,d,e){a.usersList=c,a.showAdded=!1,a.userEmpty=!1,e(function(){c.length<1&&(a.userEmpty=!0)},2e3),a.submitForm=function(){a.usersList.$add({id:a.addUserForm.userId.$viewValue,name:a.addUserForm.userName.$viewValue,phone:a.addUserForm.userPhone.$viewValue,email:a.addUserForm.userEmail.$viewValue}).then(function(b){a.showAdded=!0,a.userEmpty=!1;var c=b.key();document.getElementById("addUserForm").reset(),console.info("added record with id "+c)}),e(function(){a.showAdded=!1},2e3)},a.deleteUser=function(b){var e=d(b);e.$remove().then(function(b){console.error("data has been deleted locally and in the database"),c.length<1?a.userEmpty=!0:a.userEmpty=!1},function(a){console.error("Error:",a)})},a.editUser=function(b){var c="showEdit"+b.id;a[c]=!0},a.cancelEdit=function(b){var c="showEdit"+b.id;a[c]=!1},a.saveUser=function(b){var d="showEdit"+b.id;a[d]=!1,c.$save(b).then(function(a){console.info("data has been saved locally and in the database")},function(a){console.error("Error:",a)})},a.searchUser=function(){a.usersList=c,a.notFound=!1,a.searchResult=c.filter(function(b){return b.name==a.userName||b.username==a.userName}),a.userName="",a.usersList=a.searchResult,a.searchResult.length||(a.notFound=!0,a.usersList=c)}}]);